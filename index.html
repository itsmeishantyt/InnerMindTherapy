/* --- Configuration --- */
/* Replace these with your real values before going live */
const CONFIG = {
  // If you want to use Formspree: set FORMSPREE_ID to your form ID (e.g. "f/abcd1234")
  // Then set USE_FORMSPREE = true. If false, the script will open the user's mail app via mailto.
  USE_FORMSPREE: true,
  FORMSPREE_ID: "https://formspree.io/f/mnnwqqoa",
  // The email address that will receive booking requests when using mailto fallback:
  BOOKING_EMAIL: "itsmeishantyt@gmail.com"
};

/* --- Utilities: Smooth scroll for nav and hero button --- */
document.querySelectorAll('.nav a, .btn-primary[href^="#"]').forEach(link => {
  link.addEventListener('click', (e) => {
    const href = link.getAttribute('href');
    if (href && href.startsWith('#')) {
      e.preventDefault();
      const target = document.querySelector(href);
      if (target) target.scrollIntoView({ behavior: 'smooth' });
    }
  });
});

/* --- Footer year and contact link --- */
document.getElementById('year').textContent = new Date().getFullYear();
document.getElementById('contact-email').href = `mailto:${CONFIG.BOOKING_EMAIL}`;
document.getElementById('contact-email').textContent = CONFIG.BOOKING_EMAIL;

/* --- Form handling --- */
const form = document.getElementById('booking-form');
const messageEl = document.getElementById('form-message');
const sendBtn = document.getElementById('send-btn');

form.addEventListener('submit', async (e) => {
  e.preventDefault();
  clearMessage();

  const formData = new FormData(form);
  const name = (formData.get('name') || '').toString().trim();
  const email = (formData.get('email') || '').toString().trim();
  const age = (formData.get('age') || '').toString().trim();
  const sessionType = (formData.get('sessionType') || '').toString();
  const availability = (formData.get('availability') || '').toString().trim();
  const notes = (formData.get('notes') || '').toString().trim();

  if (!name || !email || !age || !sessionType) {
    showMessage('Please fill in all required fields before sending.', 'error');
    return;
  }

  sendBtn.disabled = true;
  sendBtn.textContent = 'Sending…';

  // Option A: Submit to Formspree (recommended for a real inbox copy)
  if (CONFIG.USE_FORMSPREE && CONFIG.FORMSPREE_ID && CONFIG.FORMSPREE_ID !== 'YOUR_FORM_ID') {
    try {
      const actionUrl = `https://formspree.io/${CONFIG.FORMSPREE_ID}`;
      const payload = {
        name, email, age, sessionType, availability, notes
      };
      const resp = await fetch(actionUrl, {
        method: 'POST',
        headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      if (resp.ok) {
        showMessage('Booking request sent. We will contact you by email.', 'success');
        form.reset();
      } else {
        showMessage('Submission failed — please try again or use the email link below.', 'error');
      }
    } catch (err) {
      showMessage('Network error — please try again or use the email link below.', 'error');
    } finally {
      sendBtn.disabled = false;
      sendBtn.textContent = 'Send Booking Request';
    }
    return;
  }

  // Option B: mailto fallback — opens user's email client prefilled
  const subject = encodeURIComponent('InnerMindTherapy Booking Request');
  const bodyLines = [
    `Name: ${name}`,
    `Email: ${email}`,
    `Age: ${age}`,
    `Preferred session: ${sessionType}`,
    `Availability: ${availability || 'Not specified'}`,
    '',
    'Notes:',
    notes || 'No additional notes provided.'
  ];
  const body = encodeURIComponent(bodyLines.join('\n'));
  const mailto = `mailto:${CONFIG.BOOKING_EMAIL}?subject=${subject}&body=${body}`;

  // Try to open mail client:
  window.location.href = mailto;

  showMessage("We've opened your email app with the booking details. Please press Send to complete the request.", 'success');
  form.reset();
  sendBtn.disabled = false;
  sendBtn.textContent = 'Send Booking Request';
});

/* --- Helper functions --- */
function showMessage(text, type = '') {
  messageEl.textContent = text;
  messageEl.classList.remove('success', 'error');
  if (type) messageEl.classList.add(type);
}

function clearMessage() {
  messageEl.textContent = '';
  messageEl.classList.remove('success', 'error');
}

/* Reset + base */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root{
  --bg:#05060a;
  --card:#0e1720;
  --muted:#9aa4b2;
  --accent1:#ff9f7c;
  --accent2:#ff4b5c;
  --glass: rgba(255,255,255,0.04);
}

html,body{
  height:100%;
  background: linear-gradient(180deg, #071025 0%, #05060a 100%);
  color: #f4f6f8;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  line-height:1.6;
}

a{ color:inherit; text-decoration:none; }

/* Header */
.site-header{
  position:fixed;
  top:0; left:0; right:0;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 1rem 1.6rem;
  background: rgba(5,6,10,0.7);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(255,255,255,0.03);
  z-index:100;
}

.logo{
  font-weight:700;
  letter-spacing:0.06em;
  text-transform:uppercase;
  font-size:0.95rem;
}

.nav a{
  margin-left:1.2rem;
  font-size:0.95rem;
  opacity:0.9;
}

.nav a:hover{ opacity:1; text-decoration:underline; }

/* Hero */
.hero{
  min-height:100vh;
  display:flex;
  align-items:center;
  padding: 6.5rem 1.2rem 3rem; /* offset for fixed header */
  background: radial-gradient(circle at top left, #1f3553 0%, #05060a 55%);
}

.hero-content{
  max-width:720px;
  margin:0 auto;
}

.hero h1{
  font-size: clamp(2rem, 4.5vw, 3rem);
  line-height:1.05;
  margin-bottom:0.8rem;
  color:#fff;
}

.hero p{
  color:var(--muted);
  font-size:1rem;
  margin-bottom:1.2rem;
}

/* Button */
.btn-primary{
  display:inline-block;
  padding:0.85rem 1.6rem;
  border-radius:999px;
  background: linear-gradient(135deg, var(--accent2), var(--accent1));
  color:#fff;
  font-weight:600;
  border:none;
  cursor:pointer;
  transition:transform .15s ease, box-shadow .15s ease;
}

.btn-primary:hover{ transform:translateY(-2px); box-shadow:0 10px 30px rgba(0,0,0,0.5); }

/* Main content */
main{ margin-top:4.5rem; }

.section{
  padding:3.5rem 1.2rem;
  max-width:1080px;
  margin:0 auto;
}

.section h2{
  font-size:1.4rem;
  margin-bottom:0.75rem;
}

.section p{ color:var(--muted); }

/* Grid */
.section-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(260px,1fr));
  gap:2.2rem;
}

/* Booking area */
.booking-section{
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding:2.2rem;
  border-radius:20px;
  box-shadow: 0 10px 30px rgba(2,6,23,0.6);
}

#booking-form{ max-width:760px; margin-top:1rem; }

.form-row{ display:flex; flex-direction:column; margin-bottom:1rem; }

label{
  font-size:0.95rem;
  margin-bottom:0.35rem;
  color:#e6eef6;
}

input, select, textarea{
  padding:0.8rem 0.9rem;
  border-radius:0.6rem;
  border:1px solid rgba(255,255,255,0.06);
  background: rgba(12,20,28,0.6);
  color:#f4f6f8;
  font:inherit;
}

input::placeholder, textarea::placeholder{ opacity:0.6; color:var(--muted); }

input:focus, select:focus, textarea:focus{
  outline:none;
  border-color: var(--accent1);
  box-shadow: 0 4px 14px rgba(255,159,124,0.07);
}

/* Actions + message */
.form-actions{ margin-top:0.6rem; display:flex; gap:1rem; align-items:center; }

.form-message{ margin-top:0.85rem; color:var(--muted); font-size:0.95rem; }

.form-message.success{ color:#8af5c9; }
.form-message.error{ color:#ffb3b3; }

/* Footer */
.site-footer{
  padding:2.4rem 1.2rem 3.2rem;
  text-align:center;
  color:var(--muted);
}

/* Responsive */
@media (max-width:720px){
  .site-header{ flex-direction:column; align-items:flex-start; gap:0.6rem; }
  .nav{ display:flex; flex-wrap:wrap; gap:0.6rem; }
  .hero{ padding-top:5.6rem; }
}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>InnerMindTherapy | Trauma-informed Therapy</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header">
    <div class="logo">InnerMindTherapy</div>
    <nav class="nav">
      <a href="#about">About</a>
      <a href="#services">Services</a>
      <a href="#therapists">Therapists</a>
      <a href="#booking">Book</a>
    </nav>
  </header>

  <main>
    <section class="hero" id="top" aria-label="Welcome">
      <div class="hero-content">
        <h1>Trauma-informed therapy for modern life</h1>
        <p>
          Professional, discreet support for stress, trauma, anxiety and life transitions. Book a session in under 60 seconds.
        </p>
        <a href="#booking" class="btn-primary">Request a Session</a>
      </div>
    </section>

    <section id="about" class="section">
      <h2>About InnerMindTherapy</h2>
      <p>
        InnerMindTherapy offers trauma-informed, evidence-based therapy tailored to young adults and professionals.
        We prioritise clear communication, safety, and a calm environment where you can process experiences and build skills.
      </p>
    </section>

    <section id="services" class="section section-grid">
      <div>
        <h2>What we offer</h2>
        <ul>
          <li>1:1 trauma-focused therapy (online & in-person where available)</li>
          <li>Short-term stabilisation plans after difficult events</li>
          <li>Tools for anxiety, sleep issues and flashbacks</li>
          <li>Clinical letters and onward referral where appropriate</li>
        </ul>
      </div>
      <div>
        <h2>Who it's for</h2>
        <ul>
          <li>Students balancing study and wellbeing</li>
          <li>Professionals dealing with burnout or crisis</li>
          <li>People recovering from sudden or long-term trauma</li>
          <li>Anyone who wants confidential, non-judgemental support</li>
        </ul>
      </div>
    </section>

    <section id="therapists" class="section">
      <h2>Meet the team</h2>
      <p>
        Our therapists are trained in trauma-informed approaches (EMDR, CBT and integrative counselling). We match you with the right therapist based on your needs and availability.
      </p>
    </section>

    <section id="booking" class="section booking-section">
      <h2>Request an appointment</h2>
      <p>
        Complete the short form below. You'll either have an email drafted for you (so you can press send), or the form will submit via a form service to your inbox — replace placeholders with your email or Formspree ID before going live.
      </p>

      <form id="booking-form" novalidate>
        <div class="form-row">
          <label for="name">Full name *</label>
          <input type="text" id="name" name="name" required placeholder="Your full name" />
        </div>

        <div class="form-row">
          <label for="email">Email address *</label>
          <input type="email" id="email" name="email" required placeholder="you@example.com" />
        </div>

        <div class="form-row">
          <label for="age">Age *</label>
          <input type="number" id="age" name="age" min="16" max="120" required />
        </div>

        <div class="form-row">
          <label for="sessionType">Preferred session type *</label>
          <select id="sessionType" name="sessionType" required>
            <option value="">Select an option</option>
            <option value="online">Online video session</option>
            <option value="in-person">In-person session (where available)</option>
          </select>
        </div>

        <div class="form-row">
          <label for="availability">Availability</label>
          <input type="text" id="availability" name="availability" placeholder="e.g. Weekday evenings after 6pm" />
        </div>

        <div class="form-row">
          <label for="notes">Anything you'd like us to know?</label>
          <textarea id="notes" name="notes" rows="4" placeholder="Optional: a brief outline of what you'd like help with."></textarea>
        </div>

        <div class="form-actions">
          <!-- Option A: Use form service (Formspree recommended). Replace FORM_ID below if using Formspree.
               Option B: Use JavaScript mailto fallback (will open user's mail app). -->
          <button id="send-btn" type="submit" class="btn-primary">Send Booking Request</button>
        </div>

        <p id="form-message" class="form-message" role="status" aria-live="polite"></p>
      </form>

      <p class="disclaimer">
        InnerMindTherapy is not an emergency service. If you are in immediate danger or thinking of harming yourself, contact local emergency services or a crisis line now.
      </p>
    </section>
  </main>

  <footer class="site-footer">
    <p>© <span id="year"></span> InnerMindTherapy</p>
    <p><a id="contact-email" href="mailto:bookings@example.com">bookings@example.com</a></p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
